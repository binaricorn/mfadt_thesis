
<html>
<head>
<title>LinkedIn JavaScript API Hello World</title>

<!-- 1. Include the LinkedIn JavaScript API and define a onLoad callback function -->
<script type="text/javascript" src="http://platform.linkedin.com/in.js">/*
  api_key: 77yrn1lqfhtjy8
  onLoad: onLinkedInLoad
  authorize: true
*/</script>

<script type="text/javascript">
  // 2. Runs when the JavaScript framework is loaded
  function onLinkedInLoad() {
    IN.Event.on(IN, "auth", onLinkedInAuth);
  }

  // 2. Runs when the viewer has authenticated
  function onLinkedInAuth() {
    IN.API.PeopleSearch()
      .fields("firstName", "lastName", "positions", "educations")
      .params({"first-name": "michael", "last-name": "kahane", "school-name":"new school"})
      .result(displayPeopleSearch)
      .error(displayPeopleSearchErrors);
  }

  // 2. Runs when the PeopleSearch() API call returns successfully
  function displayPeopleSearch(peopleSearch) {
    var peopleSearchDiv = document.getElementById("peoplesearch");
     
    var members = peopleSearch.people.values; // people are stored in a different spot than earlier example
    for (var member in members) {
      // but inside the loop, everything is the same
      // extract the title from the members first position
      peopleSearchDiv.innerHTML += "<p>" + members[member].firstName + " " + members[member].lastName 
                                + " is a " + members[member].positions.values[0].title + ".</p>";
    }     
  }

  function displayPeopleSearchErrors(error) { /* do nothing */ }
</script>
</head>
<body>

<!-- 3. Displays a button to let the viewer authenticate -->
<script type="IN/Login"></script>

<!-- 4. Placeholder for the greeting -->
<div id="peoplesearch"></div>

</body>
</html>
